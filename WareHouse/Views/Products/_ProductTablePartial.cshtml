@model IEnumerable<WareHouse.Models.Product>

@foreach (Product product in Model)
{
    <tr data-category-id="@product.Categoryid">
        <td>@product.Name</td>
        <td>@product.Price</td>
        <td>@product.Count</td>
        <td>
            @if (product.Category != null)
            {
                @product.Category.Name
            }
            else
            {
                <span>Категория не задана</span>
            }
        </td>
        @if (User.IsInRole("Менеджер по закупкам") || User.IsInRole("Администратор"))  // Replace claim check with role check
        {
            <td>
                <button type="button" class="btn btn-sm btn-primary edit-product-btn" data-toggle="modal" data-target="#editProductModal"
                        data-product-id="@product.Id"
                        data-product-name="@product.Name"
                        data-product-price="@product.Price"
                        data-product-count="@product.Count"
                        data-product-category-id="@product.Categoryid">
                    <i class="fas fa-edit"></i>
                </button>
                <a asp-action="DeleteProduct" asp-controller="Products" asp-route-id="@product.Id" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></a>
            </td>
        }
    </tr>
}
